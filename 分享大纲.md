# åŸºçŸ³ï¼ˆ+1ï¼‰ï¼šåšå®çš„å·¥ç¨‹å®è·µ - Git/CI/CDåŸºç¡€

## åˆ†äº«å®šä½
ä½œä¸ºClaude Codeå®æˆ˜å¿ƒæ³•çš„åŸºçŸ³éƒ¨åˆ†ï¼Œå¼ºè°ƒ**å·¥ç¨‹å®è·µæ˜¯æ‰€æœ‰é«˜çº§æŠ€å·§çš„åŸºç¡€**ã€‚æ²¡æœ‰å¥½çš„å·¥ç¨‹å®è·µï¼Œå†é«˜çº§çš„AIåä½œæŠ€å·§ä¹Ÿä¼šåœ¨æ··ä¹±ä¸­å¤±æ•ˆã€‚

---

## ä¸€ã€æ ¸å¿ƒç†å¿µï¼šä¸ºä»€ä¹ˆå·¥ç¨‹å®è·µæ˜¯åŸºçŸ³ï¼Ÿ

### 1.1 é—®é¢˜åœºæ™¯
- å¤šäººåä½œæ—¶çš„ä»£ç å†²çª
- éƒ¨ç½²æ—¶å‘ç°ä»£ç æ— æ³•è¿è¡Œ
- åŠŸèƒ½å›é€€æ‰¾ä¸åˆ°å†å²ç‰ˆæœ¬
- AIç”Ÿæˆçš„ä»£ç è´¨é‡ä¸å¯æ§

### 1.2 æ ¸å¿ƒè§‚ç‚¹
> **"å†èªæ˜çš„AIåŠ©æ‰‹ï¼Œä¹Ÿæ— æ³•åœ¨æ··ä¹±çš„ä»£ç åº“ä¸­æœ‰æ•ˆå·¥ä½œ"**

å·¥ç¨‹å®è·µçš„æ ¸å¿ƒä»·å€¼ï¼š
- âœ… **å¯è¿½æº¯æ€§** - æ¯ä¸€æ­¥æ”¹åŠ¨éƒ½æœ‰è®°å½•
- âœ… **å¯å›æ»šæ€§** - å‡ºé—®é¢˜æ—¶èƒ½å¿«é€Ÿæ¢å¤
- âœ… **å¯åä½œæ€§** - å›¢é˜Ÿå¹¶è¡Œå¼€å‘ä¸å†²çª
- âœ… **å¯éªŒè¯æ€§** - ä»£ç è´¨é‡è‡ªåŠ¨åŒ–æ£€æŸ¥
- âœ… **å¯é‡ç°æ€§** - ç¯å¢ƒé…ç½®æ ‡å‡†åŒ–

---

## äºŒã€GitåŸºç¡€ï¼šç‰ˆæœ¬æ§åˆ¶çš„è‰ºæœ¯

### 2.1 ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ
- å†å²è®°å½•æŸ¥è¯¢ï¼š`git log --oneline --graph`
- ä»£ç å¯¹æ¯”ï¼š`git diff`
- åˆ†æ”¯ç®¡ç†ï¼šåŠŸèƒ½éš”ç¦»
- å›æ»šæ“ä½œï¼š`git revert` vs `git reset`

### 2.2 ä¸Claude Codeåä½œçš„æœ€ä½³å®è·µ

#### å®è·µ1ï¼šæäº¤ç²’åº¦
```bash
# âŒ ä¸å¥½çš„æäº¤
git add .
git commit -m "update"

# âœ… å¥½çš„æäº¤
git add src/utils/validator.js
git commit -m "feat: æ·»åŠ ç”¨æˆ·è¾“å…¥éªŒè¯é€»è¾‘"
```

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
- Claudeéœ€è¦æ¸…æ™°çš„ä¸Šä¸‹æ–‡ç†è§£ä»£ç å˜æ›´
- å°ç²’åº¦æäº¤æ›´å®¹æ˜“å®šä½é—®é¢˜

#### å®è·µ2ï¼šåˆ†æ”¯ç­–ç•¥
```
main/master (ç”Ÿäº§)
  â””â”€ develop (å¼€å‘)
      â”œâ”€ feature/user-auth
      â”œâ”€ feature/payment
      â””â”€ hotfix/security-patch
```

**ä¸Claudeåä½œçš„åœºæ™¯ï¼š**
- æ–°åŠŸèƒ½ï¼š`git checkout -b feature/claude-generated-feature`
- ä¿®å¤Bugï¼š`git checkout -b fix/claude-suggested-fix`
- å®éªŒæ€§ä»£ç ï¼š`git checkout -b experiment/claude-exploration`

#### å®è·µ3ï¼šæäº¤ä¿¡æ¯è§„èŒƒ
```
<type>(<scope>): <subject>

<body>

<footer>
```

ç±»å‹ï¼ˆtypeï¼‰ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£
- `refactor`: é‡æ„
- `test`: æµ‹è¯•
- `chore`: æ„å»º/å·¥å…·

**ç¤ºä¾‹ï¼š**
```
feat(auth): å®ç°OAuth2ç™»å½•æµç¨‹

- é›†æˆGoogle OAuth2æä¾›å•†
- æ·»åŠ JWT tokenç”Ÿæˆé€»è¾‘
- æ›´æ–°ç”¨æˆ·æ¨¡å‹ä»¥æ”¯æŒç¬¬ä¸‰æ–¹ç™»å½•

Closes #123
```

---

## ä¸‰ã€CI/CDåŸºç¡€ï¼šè‡ªåŠ¨åŒ–æµæ°´çº¿

### 3.1 ä»€ä¹ˆæ˜¯CI/CDï¼Ÿ
- **CI (Continuous Integration)**: æŒç»­é›†æˆ
  - ä»£ç åˆå¹¶å‰è‡ªåŠ¨æµ‹è¯•
  - å‘ç°é—®é¢˜è¶Šæ—©è¶Šå¥½
  
- **CD (Continuous Deployment/Delivery)**: æŒç»­éƒ¨ç½²/äº¤ä»˜
  - è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
  - å‡å°‘äººå·¥é”™è¯¯

### 3.2 CI/CDçš„æ ¸å¿ƒç»„ä»¶

#### ç»„ä»¶1ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•
```yaml
# .github/workflows/test.yml
name: Run Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run tests
        run: npm test
```

#### ç»„ä»¶2ï¼šä»£ç è´¨é‡æ£€æŸ¥
```yaml
- name: Lint
  run: npm run lint

- name: Type Check
  run: npm run type-check
```

#### ç»„ä»¶3ï¼šæ„å»ºéªŒè¯
```yaml
- name: Build
  run: npm run build
```

#### ç»„ä»¶4ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²
```yaml
- name: Deploy
  if: github.ref == 'refs/heads/main'
  run: npm run deploy
```

---

## å››ã€ä¸Claude Codeé›†æˆçš„å®æˆ˜åœºæ™¯

### 4.1 åœºæ™¯1ï¼šè®©Claudeç”Ÿæˆæµ‹è¯•ä»£ç 
**å¯¹è¯ç¤ºä¾‹ï¼š**
```
ç”¨æˆ·ï¼šè¯·ä¸ºè¿™ä¸ªå‡½æ•°æ·»åŠ å•å…ƒæµ‹è¯•
Claudeï¼š[ç”Ÿæˆæµ‹è¯•ä»£ç ]
ç”¨æˆ·ï¼šè¿è¡Œæµ‹è¯•éªŒè¯
```

**å·¥ä½œæµï¼š**
1. Claudeç”ŸæˆåŠŸèƒ½ä»£ç 
2. è¦æ±‚ClaudeåŒæ—¶ç”Ÿæˆæµ‹è¯•
3. æœ¬åœ°è¿è¡Œï¼š`npm test`
4. æäº¤å‰CIè‡ªåŠ¨éªŒè¯

### 4.2 åœºæ™¯2ï¼šä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–
**å·¥ä½œæµï¼š**
1. Claudeç”Ÿæˆ/ä¿®æ”¹ä»£ç 
2. æäº¤Pull Request
3. CIè‡ªåŠ¨è¿è¡Œlintã€type-checkã€test
4. é€šè¿‡åæ‰å¯åˆå¹¶

**é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š**
```yaml
# .github/workflows/pr-check.yml
name: PR Checks
on:
  pull_request:
    branches: [main, develop]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run quality checks
        run: |
          npm ci
          npm run lint
          npm run type-check
          npm run test:coverage
          npm run build
```

### 4.3 åœºæ™¯3ï¼šç¯å¢ƒä¸€è‡´æ€§
**é—®é¢˜ï¼š** æœ¬åœ°èƒ½è·‘ï¼ŒæœåŠ¡å™¨ä¸è¡Œ
**è§£å†³æ–¹æ¡ˆï¼š** Docker + CI/CD

```dockerfile
# Dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
CMD ["npm", "start"]
```

```yaml
# CIéªŒè¯æ„å»º
- name: Build Docker image
  run: docker build -t myapp .
```

---

## äº”ã€å®æˆ˜æ¼”ç¤ºï¼šæ­å»ºå®Œæ•´çš„CI/CDæµç¨‹

### 5.1 é¡¹ç›®åˆå§‹åŒ–
```bash
# åˆ›å»ºé¡¹ç›®
mkdir my-claude-project
cd my-claude-project
git init

# åˆå§‹åŒ–package.json
npm init -y

# æ·»åŠ åŸºç¡€ä¾èµ–
npm install --save-dev jest eslint prettier
```

### 5.2 é…ç½®Git Hooksï¼ˆå¯é€‰ä½†æ¨èï¼‰
```bash
# å®‰è£…husky
npm install --save-dev husky
npx husky install

# æ·»åŠ pre-commit hook
npx husky add .husky/pre-commit "npm test"
```

### 5.3 é…ç½®CI/CD
åˆ›å»º `.github/workflows/ci.yml`

### 5.4 é…ç½®.claude.md
```markdown
# é¡¹ç›®è§„èŒƒ

## Gitæäº¤è§„èŒƒ
- ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼
- æäº¤å‰è¿è¡Œæµ‹è¯•ï¼š`npm test`

## æµ‹è¯•è¦æ±‚
- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«æµ‹è¯•
- è¦†ç›–ç‡ä¸ä½äº80%

## ä»£ç è´¨é‡æ ‡å‡†
- ESLintæ£€æŸ¥å¿…é¡»é€šè¿‡
- TypeScriptç±»å‹æ£€æŸ¥æ— é”™è¯¯
```

---

## å…­ã€å¸¸è§é—®é¢˜ä¸é™·é˜±

### 6.1 Gitç›¸å…³é—®é¢˜

**Q: ä»€ä¹ˆæ—¶å€™ç”¨mergeï¼Œä»€ä¹ˆæ—¶å€™ç”¨rebaseï¼Ÿ**
- `merge`: ä¿ç•™å®Œæ•´å†å²ï¼Œé€‚åˆå›¢é˜Ÿåä½œ
- `rebase`: çº¿æ€§å†å²ï¼Œé€‚åˆä¸ªäººåˆ†æ”¯æ•´ç†

**Q: å¦‚ä½•æ’¤é”€ä¸€ä¸ªå·²æ¨é€çš„æäº¤ï¼Ÿ**
- å…¬å…±åˆ†æ”¯ï¼š`git revert`ï¼ˆåˆ›å»ºæ–°æäº¤ï¼‰
- ç§æœ‰åˆ†æ”¯ï¼š`git reset` + `git push --force`ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

### 6.2 CI/CDç›¸å…³é—®é¢˜

**Q: CIå¤±è´¥ä½†æœ¬åœ°èƒ½é€šè¿‡ï¼Ÿ**
- æ£€æŸ¥ç¯å¢ƒå·®å¼‚ï¼ˆNodeç‰ˆæœ¬ã€ä¾èµ–ç‰ˆæœ¬ï¼‰
- æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- æ£€æŸ¥ç¼“å­˜é—®é¢˜

**Q: å¦‚ä½•æé«˜CIé€Ÿåº¦ï¼Ÿ**
- ä½¿ç”¨ç¼“å­˜ï¼š`actions/cache`
- å¹¶è¡Œè¿è¡Œç‹¬ç«‹ä»»åŠ¡
- åªè¿è¡Œç›¸å…³æµ‹è¯•ï¼ˆaffected testsï¼‰

---

## ä¸ƒã€è¿›é˜¶æŠ€å·§

### 7.1 æ¡ä»¶éƒ¨ç½²
```yaml
- name: Deploy to staging
  if: github.ref == 'refs/heads/develop'
  run: ./deploy.sh staging

- name: Deploy to production
  if: github.ref == 'refs/heads/main'
  run: ./deploy.sh production
```

### 7.2 å¤šç¯å¢ƒé…ç½®
```yaml
env:
  NODE_ENV: production
  API_URL: ${{ secrets.API_URL }}
  DATABASE_URL: ${{ secrets.DATABASE_URL }}
```

### 7.3 çŸ©é˜µæµ‹è¯•
```yaml
strategy:
  matrix:
    node-version: [16, 18, 20]
    os: [ubuntu-latest, windows-latest, macos-latest]
```

---

## å…«ã€æ€»ç»“ï¼šå·¥ç¨‹å®è·µä¸AIåä½œçš„ååŒæ•ˆåº”

### 8.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾
1. âœ… Gitæä¾›**å¯è¿½æº¯æ€§**å’Œ**å¯åä½œæ€§**
2. âœ… CI/CDæä¾›**è‡ªåŠ¨åŒ–éªŒè¯**å’Œ**å¿«é€Ÿåé¦ˆ**
3. âœ… è§„èŒƒåŒ–çš„æµç¨‹è®©**Claudeèƒ½æ›´å¥½åœ°ç†è§£é¡¹ç›®**

### 8.2 ä¸Claude Codeçš„ç»“åˆç‚¹
- ğŸ”„ **å¿«é€Ÿè¿­ä»£**ï¼šCIè‡ªåŠ¨éªŒè¯ï¼Œå‡å°‘äººå·¥æ£€æŸ¥
- ğŸ”„ **è´¨é‡ä¿è¯**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ç¡®ä¿AIç”Ÿæˆçš„ä»£ç å¯é 
- ğŸ”„ **çŸ¥è¯†æ²‰æ·€**ï¼š`.claude.md` + Gitå†å² = é¡¹ç›®è®°å¿†
- ğŸ”„ **åä½œå¢å¼º**ï¼šæ ‡å‡†æµç¨‹è®©å›¢é˜Ÿåä½œæ›´é¡ºç•…

### 8.3 è¡ŒåŠ¨å»ºè®®
1. **ä»ä»Šå¤©å¼€å§‹**ï¼šä¸ºé¡¹ç›®æ·»åŠ åŸºç¡€CIé…ç½®
2. **é€æ­¥å®Œå–„**ï¼šå…ˆæœ‰å†ä¼˜ï¼ŒæŒç»­æ”¹è¿›
3. **å›¢é˜Ÿå¯¹é½**ï¼šç»Ÿä¸€Gitå·¥ä½œæµå’ŒCIæµç¨‹
4. **æ–‡æ¡£å…ˆè¡Œ**ï¼šåœ¨`.claude.md`ä¸­è®°å½•å·¥ç¨‹è§„èŒƒ

---

## ä¹ã€å»¶ä¼¸é˜…è¯»ä¸èµ„æº

### 9.1 æ¨èå·¥å…·
- **Git**: GitHub Desktop, SourceTree
- **CI/CD**: GitHub Actions, GitLab CI, CircleCI
- **ä»£ç è´¨é‡**: ESLint, Prettier, SonarQube
- **æµ‹è¯•**: Jest, Vitest, Playwright

### 9.2 å­¦ä¹ èµ„æº
- Gitå®˜æ–¹æ–‡æ¡£
- GitHub Actionsæ–‡æ¡£
- çº¦å®šå¼æäº¤è§„èŒƒ
- æµ‹è¯•é‡‘å­—å¡”ç†è®º

---

## åã€äº’åŠ¨ç¯èŠ‚

### è®¨è®ºè¯é¢˜
1. ä½ çš„é¡¹ç›®ä¸­CI/CDçš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
2. å¦‚ä½•å¹³è¡¡è‡ªåŠ¨åŒ–ç¨‹åº¦å’Œæ‰§è¡Œé€Ÿåº¦ï¼Ÿ
3. Claudeç”Ÿæˆçš„ä»£ç å¦‚ä½•èå…¥ç°æœ‰CIæµç¨‹ï¼Ÿ

### å®æˆ˜ç»ƒä¹ 
- ä¸ºç°æœ‰é¡¹ç›®æ·»åŠ åŸºç¡€CIé…ç½®
- ä¼˜åŒ–æäº¤ä¿¡æ¯è§„èŒƒ
- é…ç½®pre-commit hooks
